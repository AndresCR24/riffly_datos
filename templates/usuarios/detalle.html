{% extends 'base.html' %}

{% block title %}{{ usuario.DISPLAY_NAME|default:usuario.USERNAME }} - Riffly{% endblock %}

{% block content %}
<h1>üë§ Perfil de Usuario</h1>

<div class="card">
    <h2>{{ usuario.DISPLAY_NAME|default:usuario.USERNAME }}</h2>
    <p><strong>Username:</strong> @{{ usuario.USERNAME }}</p>
    <p><strong>Email:</strong> {{ usuario.EMAIL }}</p>
    <p><strong>Tipo:</strong> <span class="badge badge-primary">{{ usuario.USER_TYPE }}</span></p>
    <p><strong>Estado:</strong>
        {% if usuario.IS_ACTIVE == 'Y' %}
            <span class="badge badge-success">Activo</span>
        {% else %}
            <span class="badge badge-danger">Inactivo</span>
        {% endif %}
    </p>
    <p><strong>Miembro desde:</strong> {{ usuario.CREATED_AT|date:"d/m/Y" }}</p>

    {% if usuario.BIO %}
    <p><strong>Biograf√≠a:</strong></p>
    <p style="font-style: italic; color: #666;">{{ usuario.BIO }}</p>
    {% endif %}
</div>

<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
    <div class="stat-card">
        <h3>{{ seguidores }}</h3>
        <p>üë• Seguidores</p>
    </div>
    <div class="stat-card">
        <h3>{{ siguiendo }}</h3>
        <p>‚ûï Siguiendo</p>
    </div>
</div>

<h2>üéµ Canciones Publicadas ({{ canciones|length }})</h2>
{% if canciones %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>T√≠tulo</th>
                <th>Duraci√≥n</th>
                <th>Fecha</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for cancion in canciones %}
            <tr>
                <td>{{ cancion.SONG_ID }}</td>
                <td><strong>{{ cancion.TITLE }}</strong></td>
                <td>{{ cancion.DURATION_SEC }} seg</td>
                <td>{{ cancion.CREATED_AT|date:"d/m/Y" }}</td>
                <td>
                    <a href="{% url 'detalle_cancion' cancion.SONG_ID %}" class="btn btn-info" style="padding: 6px 12px; font-size: 14px;">Ver</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Este usuario no ha publicado canciones a√∫n.</p>
{% endif %}

<a href="{% url 'lista_usuarios' %}" class="btn btn-warning">‚¨ÖÔ∏è Volver a Lista</a>
{% endblock %}

